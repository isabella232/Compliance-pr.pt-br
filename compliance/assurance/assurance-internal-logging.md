---
title: Log interno do Microsoft 365 para engenharia do Microsoft 365
description: Neste artigo, encontre uma explicação sobre como funciona o log interno para as equipes de Engenharia do Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 110a61c27a00380eede4d4f2303acfb025a27a1f
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/01/2021
ms.locfileid: "51497071"
---
# <a name="internal-logging-for-microsoft-365-engineering"></a><span data-ttu-id="dc17c-103">Log interno para engenharia do Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="dc17c-103">Internal logging for Microsoft 365 engineering</span></span>

<span data-ttu-id="dc17c-104">Além dos eventos e dados de log disponíveis para clientes, há também um sistema de coleta de dados de log interno que está disponível para engenheiros do Microsoft 365 na Microsoft.</span><span class="sxs-lookup"><span data-stu-id="dc17c-104">In addition to the events and log data available for customers, there is also an internal log data collection system that is available to Microsoft 365 engineers at Microsoft.</span></span> <span data-ttu-id="dc17c-105">Muitos tipos diferentes de dados de log são carregados dos servidores do Microsoft 365 para um serviço interno de computação de dados grandes chamado Cosmos.</span><span class="sxs-lookup"><span data-stu-id="dc17c-105">Many different types of log data are uploaded from Microsoft 365 servers to an internal, big data computing service called Cosmos.</span></span> <span data-ttu-id="dc17c-106">Cada equipe de serviço carrega logs de auditoria de seus respectivos servidores no banco de dados do Cosmos para agregação e análise.</span><span class="sxs-lookup"><span data-stu-id="dc17c-106">Each service team uploads audit logs from their respective servers into the Cosmos database for aggregation and analysis.</span></span> <span data-ttu-id="dc17c-107">Essa transferência de dados ocorre por meio de uma conexão TLS validada pelo FIPS 140-2 em portas e protocolos especificamente aprovados usando uma ferramenta de automação proprietária chamada ODL (Office Data Loader).</span><span class="sxs-lookup"><span data-stu-id="dc17c-107">This data transfer occurs over a FIPS 140-2-validated TLS connection on specifically approved ports and protocols using a proprietary automation tool called the Office Data Loader (ODL).</span></span> <span data-ttu-id="dc17c-108">As ferramentas usadas no Microsoft 365 para coletar e processar registros de auditoria não permitem alterações permanentes ou irreversíveis no conteúdo do registro de auditoria original ou na ordem de tempo.</span><span class="sxs-lookup"><span data-stu-id="dc17c-108">The tools used in Microsoft 365 to collect and process audit records do not allow permanent or irreversible changes to the original audit record content or time ordering.</span></span>

<span data-ttu-id="dc17c-109">As equipes de serviço usam o Cosmos como um repositório centralizado para conduzir uma análise do uso do aplicativo, para medir o desempenho operacional e do sistema e procurar por anormalidades e padrões que possam indicar problemas ou problemas de segurança.</span><span class="sxs-lookup"><span data-stu-id="dc17c-109">Service teams use Cosmos as a centralized repository to conduct an analysis of application usage, to measure system and operational performance, and to look for abnormalities and patterns that may indicate problems or security issues.</span></span> <span data-ttu-id="dc17c-110">Cada equipe de serviço carrega uma linha de base de logs no Cosmos, dependendo do que eles estão procurando analisar, que geralmente incluem:</span><span class="sxs-lookup"><span data-stu-id="dc17c-110">Each service team uploads a baseline of logs into Cosmos, depending on what they are looking to analyze, that often include:</span></span>

- <span data-ttu-id="dc17c-111">Logs de eventos</span><span class="sxs-lookup"><span data-stu-id="dc17c-111">Event logs</span></span>
- <span data-ttu-id="dc17c-112">Logs do AppLocker</span><span class="sxs-lookup"><span data-stu-id="dc17c-112">AppLocker logs</span></span>
- <span data-ttu-id="dc17c-113">Dados de desempenho</span><span class="sxs-lookup"><span data-stu-id="dc17c-113">Performance data</span></span>
- <span data-ttu-id="dc17c-114">Dados do System Center</span><span class="sxs-lookup"><span data-stu-id="dc17c-114">System Center data</span></span>
- <span data-ttu-id="dc17c-115">Registros de detalhes de chamada</span><span class="sxs-lookup"><span data-stu-id="dc17c-115">Call detail records</span></span>
- <span data-ttu-id="dc17c-116">Qualidade dos dados de experiência</span><span class="sxs-lookup"><span data-stu-id="dc17c-116">Quality of experience data</span></span>
- <span data-ttu-id="dc17c-117">Logs do Servidor Web do IIS</span><span class="sxs-lookup"><span data-stu-id="dc17c-117">IIS Web Server logs</span></span>
- <span data-ttu-id="dc17c-118">SQL Server logs</span><span class="sxs-lookup"><span data-stu-id="dc17c-118">SQL Server logs</span></span>
- <span data-ttu-id="dc17c-119">Dados de syslog</span><span class="sxs-lookup"><span data-stu-id="dc17c-119">Syslog data</span></span>
- <span data-ttu-id="dc17c-120">Logs de auditoria de segurança</span><span class="sxs-lookup"><span data-stu-id="dc17c-120">Security audit logs</span></span>

<span data-ttu-id="dc17c-121">Antes de carregar dados no Cosmos, o aplicativo ODL usa um serviço de limpeza para ofuscar todos os campos que contenham dados do cliente, como informações de locatário e informações de identificação do usuário final, e substitua esses campos por um valor de hash.</span><span class="sxs-lookup"><span data-stu-id="dc17c-121">Prior to uploading data into Cosmos, the ODL application uses a scrubbing service to obfuscate any fields that contain customer data, such as tenant information and end-user identifiable information, and replace those fields with a hash value.</span></span> <span data-ttu-id="dc17c-122">Os logs anonimizados e com hashed são reescritos e carregados no Cosmos.</span><span class="sxs-lookup"><span data-stu-id="dc17c-122">The anonymized and hashed logs are rewritten and then uploaded into Cosmos.</span></span> <span data-ttu-id="dc17c-123">As equipes de serviço executarão consultas com escopo em relação aos dados no Cosmos para correlação, alertas e relatórios.</span><span class="sxs-lookup"><span data-stu-id="dc17c-123">Service teams run scoped queries against their data in Cosmos for correlation, alerting, and reporting.</span></span> <span data-ttu-id="dc17c-124">O período de retenção de dados de log de auditoria no Cosmos é determinado pelas equipes de serviço; a maioria dos dados de log de auditoria é mantida por 90 dias ou mais para dar suporte a investigações de incidentes de segurança e para atender aos requisitos de retenção regulamentar.</span><span class="sxs-lookup"><span data-stu-id="dc17c-124">The period of audit log data retention in Cosmos is determined by the service teams; most audit log data is retained for 90 days or longer to support security incident investigations and to meet regulatory retention requirements.</span></span>

<span data-ttu-id="dc17c-125">O acesso aos dados do Microsoft 365 armazenados no Cosmos é restrito a funcionários autorizados.</span><span class="sxs-lookup"><span data-stu-id="dc17c-125">Access to Microsoft 365 data stored in Cosmos is restricted to authorized personnel.</span></span> <span data-ttu-id="dc17c-126">A Microsoft restringe o gerenciamento da funcionalidade de auditoria ao subconjunto limitado de membros da equipe de serviço responsáveis pela funcionalidade de auditoria.</span><span class="sxs-lookup"><span data-stu-id="dc17c-126">Microsoft restricts the management of audit functionality to the limited subset of service team members that are responsible for audit functionality.</span></span> <span data-ttu-id="dc17c-127">Esses membros da equipe não têm a capacidade de modificar ou excluir dados do Cosmos, e todas as alterações nos mecanismos de registro em log para o Cosmos são registradas e auditadas.</span><span class="sxs-lookup"><span data-stu-id="dc17c-127">These team members do not have the ability to modify or delete data from Cosmos, and all changes to logging mechanisms for Cosmos are recorded and audited.</span></span>

<span data-ttu-id="dc17c-128">Cada equipe de serviço acessa seus dados de log para análise, autorizando determinados aplicativos a realizar análises específicas.</span><span class="sxs-lookup"><span data-stu-id="dc17c-128">Each service team accesses its log data for analysis by authorizing certain applications to conduct specific analysis.</span></span> <span data-ttu-id="dc17c-129">Por exemplo, a equipe de Segurança do Microsoft 365 usa dados do Cosmos por meio de um analisador de log de eventos proprietário para correlacionar, alertar e gerar relatórios acionáveis sobre possíveis atividades suspeitas no ambiente de produção do Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="dc17c-129">For example, the Microsoft 365 Security team uses data from Cosmos through a proprietary event log parser to correlate, alert, and generate actionable reports on possible suspicious activity in the Microsoft 365 production environment.</span></span> <span data-ttu-id="dc17c-130">Os relatórios desses dados são usados para corrigir vulnerabilidades e para melhorar o desempenho geral do serviço.</span><span class="sxs-lookup"><span data-stu-id="dc17c-130">The reports from this data are used to correct vulnerabilities, and to improve the overall performance of the service.</span></span> <span data-ttu-id="dc17c-131">Se um alerta ou relatório específico exigir mais investigação, a equipe de serviço poderá solicitar que os dados sejam importados de volta para o serviço do Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="dc17c-131">If a specific alert or report requires further investigation, service personnel can request that data be imported back into the Microsoft 365 service.</span></span> <span data-ttu-id="dc17c-132">Como o log específico que está sendo importado do Cosmos está criptografado e o pessoal do serviço não tem acesso a chaves de descriptografia, o log de destino é passado programaticamente por um serviço de descriptografia que retorna resultados com escopo para a equipe de serviço autorizada.</span><span class="sxs-lookup"><span data-stu-id="dc17c-132">Since the specific log being imported from Cosmos is in encrypted and service personnel do not have access to decryption keys, the target log is programmatically passed through a decryption service that returns scoped results to the authorized service personnel.</span></span> <span data-ttu-id="dc17c-133">Quaisquer vulnerabilidades encontradas neste exercício são relatadas e escalonados usando os canais de gerenciamento de incidentes de segurança padrão da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="dc17c-133">Any vulnerabilities found from this exercise are reported and escalated using Microsoft's standard security incident management channels.</span></span>
